{% extends "base.html" %}
{% load static %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - FilamentStore{% endblock %}
{% block meta_description %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –∑–∞–∫–∞–∑–æ–≤ –≤ FilamentStore.{% endblock %}

{% block content %}
<div class="profile-page">
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="profile-header">
            <h1 class="profile-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç {{ user.username }}</h1>
        </div>

        <div class="profile-layout">
            <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
            <aside class="profile-sidebar">
                <nav class="profile-nav">
                    <button class="nav-btn active" data-tab="profile">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
                    <button class="nav-btn" data-tab="devices">üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</button>
                    <button class="nav-btn" data-tab="orders">üì¶ –ó–∞–∫–∞–∑—ã</button>
                    <button class="nav-btn" data-tab="security">üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</button>
                </nav>
                
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-value">{{ orders|length }}</span>
                        <span class="stat-label">–ó–∞–∫–∞–∑–æ–≤</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ devices|length }}</span>
                        <span class="stat-label">–£—Å—Ç—Ä–æ–π—Å—Ç–≤</span>
                    </div>
                </div>
            </aside>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
            <main class="profile-content">
                <!-- –í–∫–ª–∞–¥–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="tab-content active" id="profile">
                    <div class="content-card">
                        <div class="card-header">
                            <h2 class="card-title">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
                            <p class="card-subtitle">–û–±–Ω–æ–≤–∏—Ç–µ –≤–∞—à—É –ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</p>
                        </div>
                        
                        <form method="post" class="profile-form">
                            {% csrf_token %}
                            
                            <div class="form-grid">
                                {% for field in profile_form %}
                                <div class="form-group">
                                    <label for="{{ field.id_for_label }}" class="form-label">
                                        {{ field.label }}
                                        {% if field.field.required %}<span class="required">*</span>{% endif %}
                                    </label>
                                    {{ field }}
                                    {% if field.errors %}
                                    <div class="form-error">
                                        {{ field.errors.0 }}
                                    </div>
                                    {% endif %}
                                    {% if field.help_text %}
                                    <div class="form-help">
                                        {{ field.help_text }}
                                    </div>
                                    {% endif %}
                                </div>
                                {% endfor %}
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" name="update_profile" class="btn btn--primary btn--large">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
                <div class="tab-content" id="devices">
                    <div class="content-card">
                        <div class="card-header">
                            <h2 class="card-title">–ü—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h2>
                            <p class="card-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏, –∏–º–µ—é—â–∏–º–∏ –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É –∞–∫–∫–∞—É–Ω—Ç—É</p>
                        </div>

                        {% if devices %}
                        <div class="devices-list">
                            {% for device in devices %}
                            <div class="device-card">
                                <div class="device-info">
                                    <div class="device-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/>
                                        </svg>
                                    </div>

                                    <div class="device-details">
                                        <p class="device-meta">–û—Å—Ç–∞—Ç–æ–∫ —Ñ–∏–ª–∞–º–µ–Ω—Ç–∞ <div style="color:#065f46">100%</div></p>
                                    </div>

                                    <div class="device-details">
                                        <h4 class="device-name">{{ device.device_id|truncatechars:20 }}</h4>
                                        <p class="device-meta">–î–æ–±–∞–≤–ª–µ–Ω–æ {{ device.created_at|date:"d.m.Y –≤ H:i" }}</p>
                                    </div>
                                </div>
                                <div class="device-actions">
                                    <a href="{% url 'accounts:delete_device' device.id %}" 
                                       class="btn btn--danger btn--small"
                                       onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ?');">
                                        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                        </svg>
                                        –£–¥–∞–ª–∏—Ç—å
                                    </a>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="empty-state">
                            <div class="empty-icon">üì±</div>
                            <h3 class="empty-title">–ù–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</h3>
                            <p class="empty-text">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –∞–∫–∫–∞—É–Ω—Ç—É</p>
                        </div>
                        {% endif %}

                        <div class="add-device-section">
                            <h3 class="section-title">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</h3>
                            <form method="post">
                                {% csrf_token %}
                                <div class="form-group">
                                    {{ device_form.as_p }}
                                    <div class="input-with-button">
                                        <button type="submit" name="add_device"class="btn btn--primary">
                                            <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"/>
                                            </svg>
                                            –ü—Ä–∏–≤—è–∑–∞—Ç—å
                                        </button>
                                    </div>
                                    {% if device_form.device_id.errors %}
                                    <div class="form-error">
                                        {{ device_form.device_id.errors.0 }}
                                    </div>
                                    {% endif %}
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –∑–∞–∫–∞–∑–æ–≤ -->
                <div class="tab-content" id="orders">
                    <div class="content-card">
                        <div class="card-header">
                            <h2 class="card-title">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
                            <p class="card-subtitle">–í—Å–µ –≤–∞—à–∏ –∑–∞–∫–∞–∑—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ</p>
                        </div>

                        {% if orders %}
                        <div class="orders-list">
                            {% for order in orders %}
                            <div class="order-card">
                                <div class="order-header">
                                    <div class="order-info">
                                        <h3 class="order-number">–ó–∞–∫–∞–∑ #{{ order.id }}</h3>
                                        <span class="order-date">{{ order.created_at|date:"d.m.Y –≤ H:i" }}</span>
                                    </div>
                                    <div class="order-status">
                                        <span class="status-badge status-{{ order.status }}">{{ order.get_status_display }}</span>
                                    </div>
                                </div>
                                
                                <div class="order-items">
                                    {% for item in order.items.all %}
                                    <div class="order-item">
                                        <div class="item-info">
                                            <span class="item-name">{{ item.filament.brand }} {{ item.filament.material }}</span>
                                            <span class="item-quantity">{{ item.quantity }} —à—Ç.</span>
                                        </div>
                                        <span class="item-price">{{ item.get_total }} ‚ÇΩ</span>
                                    </div>
                                    {% endfor %}
                                </div>
                                
                                <div class="order-footer">
                                    <div class="order-total">
                                        <strong>–ò—Ç–æ–≥–æ: {{ order.get_total_price }} ‚ÇΩ</strong>
                                    </div>
                                    <div class="order-actions">
                                        <button class="btn btn--outline btn--small">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–∫–∞–∑</button>
                                        <button class="btn btn--outline btn--small">–î–µ—Ç–∞–ª–∏</button>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="empty-state">
                            <div class="empty-icon">üì¶</div>
                            <h3 class="empty-title">–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                            <p class="empty-text">–°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –≤ –Ω–∞—à–µ–º –º–∞–≥–∞–∑–∏–Ω–µ!</p>
                            <a href="{% url 'catalog:list' %}" class="btn btn--primary">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ -->
                <div class="tab-content" id="security">
                    <div class="content-card">
                        <div class="card-header">
                            <h2 class="card-title">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h2>
                            <p class="card-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∞–∫–∫–∞—É–Ω—Ç–∞</p>
                        </div>

                        <div class="security-settings">
                            <div class="security-item">
                                <div class="security-info">
                                    <h4>–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h4>
                                    <p>–û–±–Ω–æ–≤–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</p>
                                </div>
                                <button class="btn btn--primary">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                            </div>
                            
                            <div class="security-item">
                                <div class="security-info">
                                    <h4>–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h4>
                                    <p>–î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∑–∞—â–∏—Ç—ã</p>
                                </div>
                                <button class="btn btn--outline">–í–∫–ª—é—á–∏—Ç—å 2FA</button>
                            </div>
                            
                            <div class="security-item">
                                <div class="security-info">
                                    <h4>–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏</h4>
                                    <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–µ–∞–Ω—Å–∞–º–∏</p>
                                </div>
                                <button class="btn btn--outline">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏</button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
</div>

<style>
/* Profile Page Styles */
.profile-page {
    padding: 2rem 0;
    min-height: 80vh;
}

.profile-header {
    text-align: center;
    margin-bottom: 3rem;
}

.profile-title {
    font-size: 2.5rem;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 0.5rem;
}

.profile-subtitle {
    font-size: 1.125rem;
    color: #6b7280;
    max-width: 600px;
    margin: 0 auto;
}

.profile-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

@media (min-width: 1024px) {
    .profile-layout {
        grid-template-columns: 300px 1fr;
    }
}

/* Sidebar */
.profile-sidebar {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.profile-nav {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 1px solid #e5e7eb;
}

.nav-btn {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.25rem;
    border: none;
    background: none;
    border-radius: 8px;
    font-size: 0.875rem;
    font-weight: 500;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
}

.nav-btn:hover {
    background: #f3f4f6;
    color: #374151;
}

.nav-btn.active {
    background: #6366f1;
    color: white;
}

.profile-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 1px solid #e5e7eb;
}

.stat-item {
    text-align: center;
}

.stat-value {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    color: #6366f1;
    margin-bottom: 0.25rem;
}

.stat-label {
    font-size: 0.75rem;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Content */
.profile-content {
    min-height: 600px;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.content-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 1px solid #e5e7eb;
    overflow: hidden;
}

.card-header {
    padding: 2rem 2rem 1rem;
    border-bottom: 1px solid #e5e7eb;
}

.card-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #1f2937;
    margin: 0 0 0.5rem 0;
}

.card-subtitle {
    color: #6b7280;
    margin: 0;
}

/* Forms */
.profile-form {
    padding: 2rem;
}

.form-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin-bottom: 2rem;
}

@media (min-width: 768px) {
    .form-grid {
        grid-template-columns: 1fr 1fr;
    }
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-label {
    font-weight: 500;
    color: #374151;
    font-size: 0.875rem;
}

.required {
    color: #ef4444;
    margin-left: 2px;
}

.profile-form input,
.profile-form select,
.profile-form textarea {
    padding: 0.75rem 1rem;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 0.875rem;
    transition: all 0.3s ease;
    background: white;
}

.profile-form input:focus,
.profile-form select:focus,
.profile-form textarea:focus {
    outline: none;
    border-color: #6366f1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.form-error {
    color: #ef4444;
    font-size: 0.75rem;
    margin-top: 0.25rem;
}

.form-help {
    color: #6b7280;
    font-size: 0.75rem;
    margin-top: 0.25rem;
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    border-top: 1px solid #e5e7eb;
    padding-top: 1.5rem;
}

/* Devices */
.devices-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 2rem;
}

.device-card {
    display: flex;
    align-items: center;
    justify-content: between;
    padding: 1.5rem;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.device-card:hover {
    border-color: #6366f1;
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.1);
}

.device-info {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex: 1;
}

.device-icon {
    color: #6366f1;
}

.device-details {
    flex: 1;
}

.device-name {
    font-weight: 600;
    color: #1f2937;
    margin: 0 0 0.25rem 0;
}

.device-meta {
    color: #6b7280;
    font-size: 0.875rem;
    margin: 0;
}

.device-actions {
    flex-shrink: 0;
}

.add-device-section {
    padding: 0 2rem 2rem;
    border-top: 1px solid #e5e7eb;
    margin-top: 1rem;
}

.section-title {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: #1f2937;
}

.input-with-button {
    display: flex;
    gap: 0.5rem;
}

.input-with-button input {
    flex: 1;
}

/* Orders */
.orders-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    padding: 2rem;
}

.order-card {
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s ease;
}

.order-card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.order-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.5rem;
    background: #f9fafb;
    border-bottom: 1px solid #e5e7eb;
}

.order-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.order-number {
    font-weight: 600;
    color: #1f2937;
    margin: 0;
}

.order-date {
    color: #6b7280;
    font-size: 0.875rem;
}

.order-status {
    flex-shrink: 0;
}

.status-badge {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-pending { background: #fef3c7; color: #92400e; }
.status-processing { background: #dbeafe; color: #1e40af; }
.status-completed { background: #d1fae5; color: #065f46; }
status-cancelled { background: #fecaca; color: #991b1b; }

.order-items {
    padding: 1.5rem;
    border-bottom: 1px solid #e5e7eb;
}

.order-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
}

.order-item:not(:last-child) {
    border-bottom: 1px solid #f3f4f6;
}

.item-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.item-name {
    font-weight: 500;
    color: #374151;
}

.item-quantity {
    color: #6b7280;
    font-size: 0.875rem;
}

.item-price {
    font-weight: 600;
    color: #1f2937;
}

.order-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.5rem;
}

.order-total {
    font-size: 1.125rem;
}

.order-actions {
    display: flex;
    gap: 0.5rem;
}

/* Security */
.security-settings {
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.security-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.5rem;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.security-item:hover {
    border-color: #6366f1;
}

.security-info h4 {
    margin: 0 0 0.5rem 0;
    color: #1f2937;
    font-weight: 600;
}

.security-info p {
    margin: 0;
    color: #6b7280;
    font-size: 0.875rem;
}

/* Empty States */
.empty-state {
    text-align: center;
    padding: 3rem 2rem;
}

.empty-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
}

.empty-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #1f2937;
}

.empty-text {
    color: #6b7280;
    margin-bottom: 1.5rem;
}

/* Buttons */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-weight: 600;
    border-radius: 8px;
    transition: all 0.3s ease;
    cursor: pointer;
    border: none;
    text-decoration: none;
    font-size: 0.875rem;
    white-space: nowrap;
}

.btn--primary {
    background: #6366f1;
    color: white;
}

.btn--primary:hover {
    background: #4f46e5;
    transform: translateY(-1px);
}

.btn--outline {
    background: transparent;
    color: #6366f1;
    border: 2px solid #6366f1;
}

.btn--outline:hover {
    background: #6366f1;
    color: white;
}

.btn--danger {
    background: #ef4444;
    color: white;
}

.btn--danger:hover {
    background: #dc2626;
}

.btn--small {
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
}

.btn--large {
    padding: 1rem 2rem;
    font-size: 1rem;
}

/* Responsive */
@media (max-width: 768px) {
    .profile-layout {
        grid-template-columns: 1fr;
    }
    
    .profile-nav {
        flex-direction: row;
        overflow-x: auto;
    }
    
    .nav-btn {
        white-space: nowrap;
    }
    
    .order-header,
    .order-footer,
    .security-item {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
    }
    
    .order-actions {
        width: 100%;
        justify-content: stretch;
    }
    
    .order-actions .btn {
        flex: 1;
    }
    
    .security-item {
        align-items: flex-start;
    }
    
    .security-item .btn {
        align-self: stretch;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Tab functionality
    const navBtns = document.querySelectorAll('.nav-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    
    navBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const tabId = this.dataset.tab;
            
            // Update active nav button
            navBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Show active tab content
            tabContents.forEach(content => content.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
        });
    });
    
    // Form enhancements
    const forms = document.querySelectorAll('form');
    forms.forEach(form => {
        form.addEventListener('submit', function(e) {
            const submitBtn = this.querySelector('button[type="submit"]');
            if (submitBtn && !submitBtn.disabled) {
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" class="animate-spin"><path d="M10 3a7 7 0 100 14 7 7 0 000-14zM2 10a8 8 0 1116 0 8 8 0 01-16 0z" opacity="0.2"/><path d="M10 3a7 7 0 017 7h-2a5 5 0 00-5-5V3z"><animateTransform attributeName="transform" type="rotate" from="0 10 10" to="360 10 10" dur="1s" repeatCount="indefinite"/></path></svg> –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';
                submitBtn.disabled = true;
                
                // Revert after 3 seconds if still loading (fallback)
                setTimeout(() => {
                    if (submitBtn.disabled) {
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                    }
                }, 3000);
            }
        });
    });
    
    // Auto-focus first input in forms
    const activeForm = document.querySelector('.tab-content.active form');
    if (activeForm) {
        const firstInput = activeForm.querySelector('input, select, textarea');
        if (firstInput && firstInput.type !== 'hidden') {
            firstInput.focus();
        }
    }
});

// Add spinner animation
const style = document.createElement('style');
style.textContent = `
    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
    .animate-spin {
        animation: spin 1s linear infinite;
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}